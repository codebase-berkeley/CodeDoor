{% extends 'codedoor/base.html' %}
{% load static %}
{% block content %}

<head>
  <link rel="stylesheet" type="text/css" href="{% static 'css/basehomepage.css' %}">
  <link rel="stylesheet" href="{% static 'css/application.css' %}">
  <link rel="stylesheet" href="{% static 'css/modal.css' %}">
</head>
<body>
  <div id="home-search" class="indent">
    <h1 id="codor"> CodeDoor </h1>
    <p id="subtitle"> Find an interview, company, or work experience from a CodeBase member</p>
    <div id="searchbar">

      <form action="{% url 'codedoor:search' database='reviews' %}" method="GET">
      <input id="searchtype" name="query" type="text" placeholder='Try "Google"'>
      <button id="search" type="submit">Search</button>
      </form>
    </div>
  </div><br>


  <div id="recent-activity" class="indent">
    <h3>Recent Activity</h3><br>
    <h2 class="inline-block" >Company Reviews&nbsp;&nbsp;</h2>
      <button class="inline-block small-teal" id="create-review-btn">Create Review</button>
    </a>&nbsp;
    <button class="inline-block small-teal" id="create_company">Create Company</button>

    <!--This is the create company form-->
    <div id="companyModal" class="modal">
      <div class="modal-content">
        <span id="closeC" class="close">&times;</span>
        <h1>Create Company</h1>
          {% csrf_token %}
          <p class="error" id="display-error"></p>
          <div class="entry">
            <p>Logo</p>
            <input type="file" name="logo" id="logo1">
            <p class="error" id="logo-error"></p>
          </div>
          <div class="entry">
            <p>Company name</p>
            <input type="text" name="name" id="name">
            <p class="error" id="name-error"></p>
          </div>
          <div class="entry">
            <p>Industry</p>
            <input type="text" name="industry" id='industry'>
            <p class="error" id="industry-error"></p>
          </div>
          <div class="entry">
            <p>Website</p>
            <input type="url" name="website" id='website'>
            <p class="error" id="website-error"></p>
          </div>
          <div class="entry">
            <p>Type of company</p>
              <div class="company-types">
                <input class="type" type="radio" name="structure" value="Startup" id="startup">
                <label for="Startup">Startup</label><br />
                <input class="type" type="radio" name="structure" value="Boutique" id="boutique">
                <label for="Boutique">Boutique</label><br />
                <input class="type" type="radio" name="structure" value="Medium" id="medium">
                <label for="Medium">Medium</label><br />
                <input class="type" type="radio" name="structure" value="Small" id="small">
                <label for="Small">Small</label><br />
                <input class="type" type="radio" name="structure" value="Large" id="large">
                <label for="Large">Large</label><br />
              </div>
            </div>
            <p class="error" id="type-error"></p>
            <button id="submit" type="submit" class="small-teal">Submit</button>
          </div>
      </div>

  </div>
</div>
  <hr id="break">
</br>

<div id="reviews">
    {% comment %}
      We add an invisible "dummy" review to the HTML to provide a template for review creation in clientside code.
    {% endcomment %}
    {% include "components/review.html" with review=reviews.0 dummy=True only %}
    {% for review in reviews %}
      {% include "components/review.html" with review=review only %}
      <br>
    {% endfor %}


    {% if num_reviews > 3 %}
    <a href="{% url 'codedoor:view_company_reviews' %}">Show More >>></a>
    {% endif %}

    <br>
  </div>
  <br>

  <div class="interviews" >
    <h2 class="inline-block">Interviews&nbsp;&nbsp;</h2>
    <button id="create-application-btn" class="inline-block small-teal" onclick="displayApplicationForm()">Create New Application</button>
  </div>
  <hr id="break">

  <div id="application-list" class="indent">
    <div id="existing-applications">
      {% for a in applications %}
        {% include "components/application.html" with a=a only %}
        <br>
      {% endfor %}
      {% if num_apps > 3 %}
          <a href="{% url 'codedoor:list_all_applications' %}">Show More >>></a>
      {% endif %}
    </div>

    <!-- Source: Vitor Freitas -->
    {% if applications.has_other_pages %}
      <ul class="pagination">
        {% if applications.has_previous %}
          <li class="clickable"><a href="?page={{ applications.previous_page_number }}">&laquo;</a></li>
        {% else %}
          <li>&laquo;</li>
        {% endif %}
        {% for i in applications.paginator.page_range %}
          {% if applications.number == i %}
            <li class="active">{{ i }}</li>
          {% else %}
            <li><a href="?page={{ i }}">{{ i }}</a></li>
          {% endif %}
        {% endfor %}
        {% if applications.has_next %}
          <li><a href="?page={{ applications.next_page_number }}">&raquo;</a></li>
        {% else %}
          <li>&raquo;</li>
        {% endif %}
      </ul>
    {% endif %}
    <br>
  </div>

{% include "components/review_modal.html" with id="review-modal" on_submit_list_id="reviews" only %}
{% include "components/application_modal.html" with id="application-modal" on_submit_list_id="application-list" only %}

</body>
<script src="{% static 'js/home.js' %}"></script>

{% endblock %}
