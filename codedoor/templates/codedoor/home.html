{% extends 'codedoor/base.html' %}
{% load static %}
{% block content %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/home.css' %}">

<head>
  <link rel="stylesheet" type="text/css" href="{% static 'css/basehomepage.css' %}">
  <link rel="stylesheet" href="{% static 'css/application.css' %}">
  <link rel="stylesheet" href="{% static 'css/modal.css' %}">
</head>
<body>
  <div id="home-search" class="indent">
    <h1 id="codor"> Codor </h1>
    <p id="subtitle"> Find an interview, company, or work experience from a CodeBase member</p>
    <div id="searchbar">

      <form action="{% url 'codedoor:search' database='reviews' %}" method="GET">
       <input id="searchtype" name="query" type="text" placeholder='Try "Google"'>
        <button class="sub" id="search" type="submit">Search</button>
      </form>
    </div>
  </div><br>


  <div id="recent-activity" class="indent">
    <h3>Recent Activity</h3><br>
    <h2 class="inline-block" >Company Reviews&nbsp;&nbsp;</h2>
      <button class="inline-block small-teal" id="createreviewbutton">Create Review</button>
    </a>&nbsp;
    <button class="inline-block small-teal" id="create_company">Create Company</button>

    <!--This is the create company form-->
    <div id="companyModal" class="modal">
      <div class="modal-content">
        <span id="closeC" class="close">&times;</span>
        <h1> Create Company </h1><br>

          {% csrf_token %}
          <p class="error" id="display-error"></p>
          <div class="space">
            <h4>Logo</h4>
            <div class="border">
              <input type="file" name="logo" id="logo1">
            </div>
            <p class="error" id="logo-error">
            </p>
          </div><br>
          <div class="space">
            <h4>Company name</h4>
            <div class="border-text">
              <input type="text" name="name" id="name">
            </div>
            <p class="error" id="name-error">
            </p>
          </div><br>
          <div class="space">
            <h4>Industry</h4>
            <div class="border-text">
              <input type="text" name="industry" id='industry'>
            </div>
            <p class="error" id="industry-error">
            </p>
          </div><br>
          <div class="space">
            <h4>Website</h4>
            <div class="border-text">
              <input type="url" name="website" id='website'>
            </div>
            <p class="error" id="website-error">
            </p>
          </div><br>

          <div class="space">
            <h4>Type of company</h4>
            <div class="border">
              <input class="type" type="radio" name="structure" value="Startup" id="startup">Startup<br>
              <input class="type" type="radio" name="structure" value="Boutique" id="boutique">Boutique<br>
              <input class="type" type="radio" name="structure" value="Medium" id="medium">Medium<br>
              <input class="type" type="radio" name="structure" value="Small" id="small">Small<br>
              <input class="type" type="radio" name="structure" value="Large" id="large">Large<br>
            </div>
            <p class="error" id="type-error">
            </p>
          </div><br>
          <button id="submit" type="submit" class="small-teal">Submit</button>
      </div>

  </div>
</div>
  <hr id="break">
</br>


<div id="reviewmodal" class="modal">
  <div class="modal-content">
  <span id="closeR" class="close">&times;</span>
  <h1> Create Review </h1><br>
      <div class="space">
        <h4>Review Title</h4>
        <div class="border-text">
          <div id="title">
            <input type="text" name="title" id="title1">
          </div>
          <p class="error" id="title-error">
          </p>
        </div>
      </div><br>
      <div class="space">
        Company <br>
        <div class="border-text">
          <input id="companysearch" type="text"/>
          <div id="suggestions">

          </div>
        </div>
        <p class="error" id="company-error">
        </p>
      </div><br>
        <div class="space">
        Rating (0 - 5)<br>
        <div class="border-text">
          <div id="number">
            <input type="number" name="rating" min="0" max="5" step="0.5" id="rating">
          </div>
        </div>
        <p class="error" id="rating-error">
        </p>
      </div><br>
      <div class="space">Recommend
        <div class="border">
          <span><input type="radio" name="recommend" value=True id="yes">  Yes</span>
          <span><input type="radio" name="recommend" value=False id="no">  No</span><br>
        </div>
        <p class="error" id="recommend-error">
        </p>
      </div><br>
      <div class="space">Review <br>
        <div class="border">
          <textarea type="text" name="review" id="review"></textarea>
        </div>
        <p class="error" id="review-error">
        </p>
      </div><br>
      <button id="submit_button_review" class="inline-block small-teal">Submit Review</button>
    </div>
  </div>


<div id="reviews">
    {% for review in reviews %}
      {% include "components/review.html" with review=review only %}
      <br>
    {% endfor %}


    {% if num_reviews > 3 %}
    <a href="{% url 'codedoor:view_company_reviews' %}">Show More >>></a>
    {% else %}
    <div></div>
    {% endif %}

    <br>
  </div>
  <br>



  <div class="indent" >
    <h2 class="inline-block">Interviews&nbsp;&nbsp;</h2>
    <button id="create-application-btn" class="inline-block small-teal" onclick="displayApplicationForm()">Create New Application</button>
  </div>
  <hr id="break">




  <div id="application-modal" class="modal">
    <div class="modal-content">
      <span id="closeA" class="close">&times;</span>
      <h1> Create Application</h1>
      <div id="hidden-application" class="indent">

        <br>

        <div class="entry">
          <h4>Position:</h4><br>
          <p id="error0"></p>
          <input id="position" name="position" placeholder="Job title" class="text" required></input><br>
        </div>
        <div class="entry">
          <h4>Company:</h4><br>
          <div class="border-text">
            <input id="companysearch2" type="text"/>
            <div id="suggestions2">

            </div>
          </div>
          <p id="error1" class="error"></p>

        <div class="entry">
          <h4>Season:</h4><br>
          <p id="error1" class="error"></p>
          <select id="season" name="season" class="menu" required>
            <option value="Fall">Fall</option>
            <option value="Winter">Winter</option>
            <option value="Spring">Spring</option>
            <option value="Summer">Summer</option>
          </select>
        </div>
        <div class="entry">
          <h4>Year:</h4><br>
          <p id="error2" class="error"></p>
          <input id="year" type="number" min="1990" max="2018" name="year" placeholder="e.g. 2015" class="select-num" required></input><br>
        </div>
        <div class="entry">
          <h4>Difficulty:</h4><br>
          <p id="error3" class="error"></p>
          <input id="difficulty" type="number" min="1" max="10" name="difficulty" placeholder="1-10" class="select-num" required></input><br>
        </div>
        <div class="entry">
          <h4>Description:</h4><br>
          <p id="error4" class="error"></p>
          <textarea id="description" name="description" placeholder="Description of application" required></textarea><br>
        </div>
        <div class="entry">
          <h4>Received Offer:</h4><br>
          <p id="error5" class="error"></p>
          <p><input id="received_offer" type="radio" name="received_offer" value="Yes" class="bubble"> Yes</p>
          <p><input id="received_offer" type="radio" name="received_offer" value="No" class="bubble"> No</p><br>
        </div>
        <div class="entry">
          <h4>Offer details:</h4><br>
          <p id="error6" class="error"></p>
          <textarea id="offer_details" name="offer_details" placeholder="Offer details (pay, perks, etc.)"></textarea><br>
        </div>
        <div class="entry">
          <button id="submit_button" type="submit" class="small-teal">Submit</button>
        </div>
      </div>
    </div>
  </div>











  <div id="application-list" class="indent">
    <div id="hidden-element" class="hidden">
      <table>
        <tr>
          <td rowspan="3" width="7%">
            <img id="hidden-logo" class="hidden-logo" width="100" height="100">
          </td>
          <td width="93%">
            <a id="company-link">
              <h2 id="hidden-company-name" class="link-text hidden-company-name"></h2>
            </a>
            <span id="hidden-profile-name" class="applicant-name hidden-profile-name"></span>
          </td>
        </tr>
        <tr>
          <td>
            <p><span id="hidden-position" class="info job-position hidden-position"></span>
            <span id="hidden-season" class="info job-season hidden-season"></span><span id="hidden-year" class="info job-season hidden-year"></span></p>
          </td>
        </tr>
        <tr>
          <td>
            <p>
            <span class="info colorful-boxy">
              <svg width="15" height="15">
                <rect id="hidden-square" x="0" y="0" rx="3" ry="3" width="15" height="15" />
              </svg><span id="hidden-offer-text" class="hidden-offer-text"></span>
            </span>
            <span class="info colorful-boxy">
              <svg width="15" height="15">
                <rect id="hidden-difficulty-square" x="0" y="0" rx="3" ry="3" width="15" height="15" />
              </svg>&nbsp;&nbsp;<span id="hidden-difficulty-text" class="hidden-difficulty-text"></span>
            </span>
            </p>
          </td>
        </tr>
        <tr>
          <td></td>
          <td>
            <h4>Description:</h4>
            <p id="hidden-description" class="description_small_text hidden-description"></p>
          </td>
        </tr>
      </table>
    </div>


    <div id="existing-applications">
      {% for a in applications %}
        {% include "components/application.html" with a=a only %}
        <br>
      {% endfor %}
      {% if num_apps > 3 %}
          <a href="{% url 'codedoor:list_all_applications' %}">Show More >>></a>
      {% endif %}
    </div>

    <!-- Source: Vitor Freitas -->
    {% if applications.has_other_pages %}
      <ul class="pagination">
        {% if applications.has_previous %}
          <li class="clickable"><a href="?page={{ applications.previous_page_number }}">&laquo;</a></li>
        {% else %}
          <li>&laquo;</li>
        {% endif %}
        {% for i in applications.paginator.page_range %}
          {% if applications.number == i %}
            <li class="active">{{ i }}</li>
          {% else %}
            <li><a href="?page={{ i }}">{{ i }}</a></li>
          {% endif %}
        {% endfor %}
        {% if applications.has_next %}
          <li><a href="?page={{ applications.next_page_number }}">&raquo;</a></li>
        {% else %}
          <li>&raquo;</li>
        {% endif %}
      </ul>
    {% endif %}
    <br>
  </div>

</body>
<script src="{% static 'js/createreview.js' %}"></script>
<script src="{% static 'js/company.js' %}"></script>
<script src="{% static 'js/application.js' %}"></script>
<script src="{% static 'js/home.js' %}"></script>
<script src="{% static 'js/dropdown.js' %}"></script>
{% endblock %}
